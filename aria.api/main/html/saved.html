<div class="myDiv" id="div3">
    <div class="clearTop"></div>
    <div class="title">
        <span class="first">aria</span>
        <span class="second">.saved()</span>
    </div>
    <div class="description">
        <p>/ˈkæpʧəd ˈrɛvəriz/</p>
    </div>
    <div class="description2">
        <span>Here you can revisit <br>
        that which you sought.</span>
    </div>
    <div class="home-container">
        <!--<input type="button" value="Add Row" onclick="addRow('dataTable1')"/>-->
        <!--<input type="button" value="refresh" id="refresh"/>-->

        <table id="dataTable1" class="tableFavorite">
            <caption>&#60;favorites&#62;</caption>

            <tr>
                <th class="table_heading date"><span class="purple">.date_added</span>:</th>
                <th class="table_heading artist"><span class="purple">.song_artist</span>:</th>
                <th class="table_heading name"><span class="purple">.song_title</span>:</th>
                <th class="table_heading buttons"><span></span></th>
            </tr>

            <!--<tr class="table_row">
                <td class="table_content date">2022-05-03, 15:16:10</td>
                <td class="table_content artist">Eminem</td>
                <td class="table_content name">Godzilla (ft. Juice WRLD)</td>
                <td class="table_content buttons">
                    <button type="button" class="customButton4">
                        <span class="gg-eye"></span>
                    </button>
                    <button type="button" buttonId="remove" class="customButton5">
                        <span class="gg-close"></span>
                    </button>
                </td>
            </tr>-->
        </table>

        <!--<input type="button" value="Add Row" onclick="addRow('dataTable2')"/>-->

        <table id="dataTable2" class="tableHistory">
            <caption>&#60;search_history&#62;</caption>

            <tr>
                <th class="table_heading date"><span class="purple">.date_searched</span>:</th>
                <th class="table_heading artist"><span class="purple">.song_artist</span>:</th>
                <th class="table_heading name"><span class="purple">.song_title</span>:</th>
                <th class="table_heading buttons"><span></span></th>
            </tr>

            <tr class="table_row">
                <td class="table_content date">2022-05-03, 15:16:10</td>
                <td class="table_content artist">Eminem</td>
                <td class="table_content name" tableId="name">Godzilla (ft. Juice WRLD)</td>
                <td class="table_content buttons">
                    <button type="button" class="customButton4">
                        <span class="gg-eye"></span>
                    </button>
                    <button type="button" buttonId="remove" class="customButton5">
                        <span class="gg-close"></span>
                    </button>
                </td>
            </tr>
        </table>
    </div>

</div>


<script>

    $(function(){
        $.post("http://localhost:8081/saved").then((data) => {
            let favoriteObject = data;
            $('#dataTable1 .table_row').remove();
            for (let i = 0; i < favoriteObject.length; i++) {
                $('#dataTable1').append('<tr class="table_row">\n' +
                    '                <td class="table_content date">' + favoriteObject[i].aika + '</td>\n' +
                    '                <td class="table_content artist">' + favoriteObject[i].artist + '</td>\n' +
                    '                <td class="table_content name" tableId="name">' + favoriteObject[i].song + '</td>\n' +
                    '                <td class="table_content buttons">\n' +
                    '                    <button type="button" class="customButton4">\n' +
                    '                        <span class="gg-eye"></span>\n' +
                    '                    </button>\n' +
                    '                    <button type="button" buttonId="remove" class="customButton5">\n' +
                    '                        <span class="gg-close"></span>\n' +
                    '                    </button>\n' +
                    '                </td>\n' +
                    '            </tr>');
            }

            $("button[buttonId^='remove']").on("click", function (e) {
                e.preventDefault();

                let songTitle = $(this).closest('.table_row').find('td[tableId="name"]').html();

                $(this).closest('.table_row').remove();

                $.post("http://localhost:8081/delete",
                    {
                        'title': songTitle
                    })
            });
        });

    });



    /*$('#refresh').click(function (e) {
        e.preventDefault();
        $.post("http://localhost:8081/saved").then((data) => {
            let favoriteObject = data;
            $('#dataTable1 .table_row').remove();
            for (let i = 0; i < favoriteObject.length; i++) {
                $('#dataTable1').append('<tr class="table_row">\n' +
                    '                <td class="table_content">' + favoriteObject[i].aika + '</td>\n' +
                    '                <td class="table_content">' + favoriteObject[i].artist + '</td>\n' +
                    '                <td class="table_content">' + favoriteObject[i].song + '</td>\n' +
                    '                <td class="table_content">\n' +
                    '                    <button type="button" class="customButton4">\n' +
                    '                        <span class="gg-eye"></span>\n' +
                    '                    </button>\n' +
                    '                    <button type="button" buttonId="remove" class="customButton5">\n' +
                    '                        <span class="gg-close"></span>\n' +
                    '                    </button>\n' +
                    '                </td>\n' +
                    '            </tr>');
            }


            $(".table_row button[buttonId^='remove']").on("click", function (e) {
                e.preventDefault();
                $(this).closest('.table_row').remove();
            })
        });
    });*/

    /*function addRow(tableID) {
        $('#' + tableID).append('<tr class="table_row">\n' +
            '                <td class="table_content">2022-05-03, 15:16:10</td>\n' +
            '                <td class="table_content">Eminem</td>\n' +
            '                <td class="table_content">Godzilla (ft. Juice WRLD)</td>\n' +
            '                <td class="table_content">\n' +
            '                    <button type="button" class="customButton4">\n' +
            '                        <span class="gg-eye"></span>\n' +
            '                    </button>\n' +
            '                    <button type="button" buttonId="remove" class="customButton5">\n' +
            '                        <span class="gg-close"></span>\n' +
            '                    </button>\n' +
            '                </td>\n' +
            '            </tr>');
        //$(".table_row:last").clone().appendTo('#' + tableID).removeAttr("style");
        $(".table_row button[buttonId^='remove']").on("click", function (e) {
            e.preventDefault();
            $(this).closest('.table_row').remove();
        })
    }*/
</script>
